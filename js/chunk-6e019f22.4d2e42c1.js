(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e019f22","chunk-2d0d6f17","chunk-2d0c1195"],{"15fd":function(e,t,r){"use strict";r("a4d3"),r("c975"),r("b64b");function n(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}function a(e,t){if(null==e)return{};var r,a,o=n(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)r=c[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}r.d(t,"a",(function(){return a}))},4531:function(e,t,r){"use strict";r.r(t),r.d(t,"crudOptions",(function(){return c}));r("99af"),r("a9e3");var n=r("c276"),a=r("c1df"),o=r.n(a),c={columns:[{title:"员工姓名",key:"userId",align:"center",width:100,type:"select",search:{disabled:!1},form:{rules:[{required:!0,message:"请填写姓名"}],addTemplateHandle:function(e){console.log("addTemplateHandle",e);var t=n["a"].cookies.get("id");console.log("user id",t),e.value=Number(t),e.component.disabled=!0}},dict:{url:"/human/user/list",value:"id",label:"name"}},{title:"请假/出差原因",align:"center",width:250,key:"reason",search:{disabled:!1},type:"input",form:{rules:[{required:!0,message:"请填写原因"}]}},{title:"时间",key:"dateFromTo",align:"center",width:280,search:{disabled:!0},type:"datetimerange",form:{rules:[{required:!0,message:"请选择时间"}],component:{width:"100%",props:{clearable:!0}}},valueBuilder:function(e,t){console.log("valueBuilder",e),e.dateFromTo=[o()(e.startDate),o()(e.endDate)]},valueResolve:function(e,t){e.startDate=o()(e.startDate).format("YYYY-MM-DD HH:mm:ss"),e.endDate=o()(e.endDate).format("YYYY-MM-DD HH:mm:ss")},formatter:function(e,t,r,n){return console.log("formatter",e,t,r,n),e.startDate&&e.endDate&&"".concat(o()(e.startDate).format("YYYY-MM-DD HH:mm:ss")," - ").concat(o()(e.endDate).format("YYYY-MM-DD HH:mm:ss"))}},{title:"请假类别",key:"type",search:{},type:"select",form:{rules:[{required:!0,message:"请选择请假类别"}],component:{props:{clearable:!0}}},dict:{data:[{value:1,label:"出差"},{value:2,label:"请假"}]}},{title:"出差地点",key:"location",width:200,search:{disabled:!0},type:"input",form:{rules:[{required:!0,message:"请填写联系方式"}],component:{props:{filterable:!0,multiple:!0,clearable:!0}}}},{title:"审核结果",key:"isAgree",search:{},type:"select",form:{rules:[{required:!1,message:"请填写邮箱地址"}],disabled:!0,component:{props:{filterable:!0,multiple:!0,clearable:!0}}},dict:{data:[{label:"待审核",value:0},{label:"通过",value:1},{label:"驳回",value:2}]},formatter:function(e,t,r,n){return console.log("formatter",e,t,r,n),e.createAt&&o()(e.createA).format("YYYY-MM-DD HH:mm:ss")}}],formOptions:{labelWidth:"120px"},page:{current:1,size:5,total:1},rowHandle:{width:150,edit:{show:!1},remove:{show:!1},custom:[{text:"同意",type:"primary",size:"small",emit:"custom-agree",disabled:function(e,t){console.log("同意操作",e,t);var r=t.isAgree;return 0!==r}},{text:"驳回",type:"danger",size:"small",emit:"custom-deny",disabled:function(e,t){console.log("驳回操作",e,t);var r=t.isAgree;return 0!==r}}]}}},"581c":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("d2-container",{staticClass:"travelLeave_wrapper"},[e.hasFilter?r("crud-search",{ref:"search",staticClass:"d2-mb-10",attrs:{options:e.crud.searchOptions},on:{submit:e.handleSearch}}):e._e(),r("d2-crud",{ref:"d2Crud",attrs:{columns:e.crud.columns,data:e.crud.list,rowHandle:e.hasOperate?e.crud.rowHandle:null,"form-options":e.crud.formOptions,options:e.crud.options,loading:e.crud.loading},on:{"form-data-change":e.handleFormDataChange,"custom-agree":e.handleAgree,"custom-deny":e.handleDeny}}),r("crud-footer",{ref:"footer",attrs:{slot:"footer",current:e.crud.page.current,size:e.crud.page.size,total:e.crud.page.total},on:{change:e.handlePaginationChange},slot:"footer"})],1)},a=[],o=(r("a4d3"),r("4de4"),r("c975"),r("e439"),r("dbb4"),r("b64b"),r("159b"),r("ade3")),c=r("15fd"),s=r("c276"),u=r("4531"),l=r("1fbf"),i=r("7569");function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){Object(o["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p={name:"travelLeave",mixins:[l["d2CrudPlus"].crud],computed:{hasFilter:function(){var e=[2],t=s["a"].getRole();return-1!==e.indexOf(t)},hasOperate:function(){var e=s["a"].getRole();return 3===e}},methods:{getCrudOptions:function(){return u["crudOptions"]},pageRequest:function(e){console.log("request",e);var t=s["a"].cookies.get("role"),r=e.current,n=e.size,a=Object(c["a"])(e,["current","size"]),o=f({roleType:t,page:r,size:n},a);return Object(i["GetList"])(o).then((function(e){var t=e||{},r=t.list,n=t.total,a=t.page,o=t.size,c={data:{records:r,current:a,size:o,total:n}};return c}))},addRequest:function(e){return console.log("addRequest",e),Object(i["AddObj"])(e)},updateRequest:function(e){return Object(i["UpdateObj"])(e)},handleAgree:function(e){var t=e||{},r=t.row,n=void 0===r?{}:r,a=n.id,o={id:a,isAgree:1};Object(i["UpdateObj"])(o).then((function(e){console.log(e)})),this.doRefresh()},handleDeny:function(e){var t=e||{},r=t.row,n=void 0===r?{}:r,a=n.id,o={id:a,isAgree:2};Object(i["UpdateObj"])(o).then((function(e){console.log(e)})),this.doRefresh()},delRequest:function(e){return Object(i["DelObj"])(e.id)}},mounted:function(){console.log("travelLeave instance mounted",this)}},m=p,b=(r("b9e0"),r("2877")),g=function(e){e.options.__source="src/views/travelLeave/index.vue"},h=g,O=Object(b["a"])(m,n,a,!1,null,null,null);"function"===typeof h&&h(O);t["default"]=O.exports},7569:function(e,t,r){"use strict";r.r(t),r.d(t,"GetList",(function(){return a})),r.d(t,"AddObj",(function(){return o})),r.d(t,"UpdateObj",(function(){return c})),r.d(t,"DelObj",(function(){return s}));var n=r("9bd2");function a(e){return Object(n["a"])({url:"/human/travel/list",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/human/travel/create",method:"post",data:e})}function c(e){return Object(n["a"])({url:"/human/travel/update",method:"put",data:e})}function s(e){return Object(n["a"])({url:"/human/travel/delete",method:"delete",params:{id:e}})}},ab49:function(e,t,r){},b9e0:function(e,t,r){"use strict";var n=r("ab49"),a=r.n(n);a.a}}]);